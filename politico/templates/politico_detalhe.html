{% extends 'base.html' %}

{% block title %}Detalhes do Político{% endblock %}

{% block body %}
<div class="container">
  <div class="row">
    <div class="col-12">
      <h2>Detalhes do Político</h2>
    </div>
  </div>

  <!-- Informações do Político -->
  <div class="row">
    <div class="col-12">
      <h3>{{ politico.nome }}</h3>
      <p><strong>CPF:</strong> {{ politico.cpf }}</p>
      <p><strong>CNPJ:</strong> {{ politico.cnpj }}</p>
      <p><strong>Cargo:</strong> {{ politico.cargo }}</p>
      <p><strong>Partido:</strong> {{ politico.partido.nome }}</p>
      <p><strong>Sigla do Partido:</strong> {{ politico.partido.sigla }}</p>
    </div>
  </div>

  <!-- Despesas do Político -->
  <div class="row">
    <div class="col-2">
      <h3>Despesas</h3>
    </div>
    <!-- Formulário de Filtro     -->
    <div class="col-10">
      <form method="get" action="">
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Filtrar</button>
      </form>
    </div>


  </div>
  <div class="row">
    <div class="col-12">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Data</th>
            <th>Categoria</th>
            <th>Descrição</th>
            <th>Valor</th>
          </tr>
        </thead>
        <tbody>
          {% if despesa %}
          {% for despesa in despesa %}
          <tr>
            <td>{{ despesa.data }}</td>
            <td>{{ despesa.categoria }}</td>
            <td>{{ despesa.descricao }}</td>
            <td>{{ despesa.valor }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p>Não há despesas registradas para este político.</p>
      {% endif %}
    </div>
  </div>

  <!-- Botões de ação -->
  <div class="row">
    <div class="col-12">
      <a href="{% url 'politico-update' politico.pk %}" class="btn btn-primary">Editar</a>
      <a href="{% url 'politico-delete' politico.pk %}" class="btn btn-danger">Deletar</a>
      <a href="{% url 'politico-list' %}" class="btn btn-secondary">Voltar para a lista</a>
    </div>
  </div>
</div>
{% endblock %}